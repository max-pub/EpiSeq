<!-- <link rel="stylesheet" href="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css"> -->
<!-- <script src="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script> -->

<!-- <script src="https://cdn.jsdelivr.net/npm/chartist@1.3.0/dist/index.umd.min.js"></script> -->
<!-- <link href="https://cdn.jsdelivr.net/npm/chartist@1.3.0/dist/index.min.css" rel="stylesheet"> -->

<!-- <div class="ct-chart ct-perfect-fourth"></div> -->
<meta charset="UTF-8">
<!-- <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script> -->
<script src="./lib/apexcharts.js"></script>


<div style="margin-left:1em">
	<h1>Correlation of MDRO-Typings and Patient Movement Data</h1>
	<h3>Developed at the <a href="https://www.ukm.de/institute/hygiene" target="_blank">institute for hygiene</a> at the
		<a href="https://www.ukm.de" target="_blank">university hospital of Münster</a>
	</h3>
	<h5>source code on <a href="https://github.com/max-pub/mro-epi" target="_blank">github</a></h5>
	<h5>related academic paper on <a href="https://pubmed.ncbi.nlm.nih.gov/35370082/" target="_blank">pubmed</a>
	</h5>
	<!-- <a onclick="document.location.reload(true)">reload</a> -->
</div>





<h2>source data</h2>

<div id="source">

	<div class="flex-start">
		<form id="demo" class="box">
			<h5>UKM Münster demo data</h5>
			<ul>
				<li> <a demo="coli"> E. coli </a> </li>
				<li> <a demo="mrsa"> MRSA </a> </li>
				<li> <a demo="vre"> VRE </a> </li>
			</ul>
		</form>

		<form id="upload" class="box">
			<h5>upload your own data</h5>
			<br />
			<!-- <form> -->
			<table>
				<tr class="typings">
					<td> typings </td>
					<td> <input type="file" /> </td>
				</tr>
				<tr class="locations">
					<td> locations </td>
					<td> <input type="file" /> </td>
				</tr>
			</table>
			<br />
			<a href="https://github.com/max-pub/mro-epi" target="_blank">required file structure</a>
			<!-- </form> -->
		</form>
	</div>

	<ul class="info"></ul>

	<table class="info"></table>

</div>



<h2>filter & options</h2>


<div id="filter">
	<form class="box inline-block">
		<table>
			<tr id="from">
				<td> from </td>
				<td> <input type="date" value="2015-01-01" /> </td>
				<td class="help"> remove all entries <i>before</i> the given date </td>
			</tr>

			<tr id="till">
				<td> till </td>
				<td> <input type="date" value="2023-01-01" /> </td>
				<td class="help"> remove all entries <i>after</i> the given date </td>
			</tr>

			<tr id="rows">
				<td> rows </td>
				<td> <input type="number" value="90" min="0" max="100" size="3" />% </td>
				<td class="help"> minimal percentage of correct alleles </td>
				<td class="download"></td>
			</tr>

			<tr id="cols">
				<td> columns </td>
				<td> <input type="number" value="0" min="0" max="100" size="3" />% </td>
				<td class="help"> minimal percentage of correct alleles </td>
				<td class="download"></td>
			</tr>

			<tr id="hasRoom">
				<td> room data required </td>
				<td> <input type="checkbox" checked> </td>
				<td class="help"> keep only patients that have at least one room entry </td>
			</tr>
			<!-- <tr id="matchingPatients">
			<td> typing & location </td>
			<td></td>
			<td class="help"> keep only patients that have both typing and location records</td>
		</tr> -->
			<!-- <tr>
			<td colspan="4">
				<hr />
			</td>
		</tr> -->

			<tr id="pseudonymize">
				<td> pseudonymize </td>
				<td> <input type="checkbox"  > </td>
				<td class="help"> replace identifiers in input data with random strings </td>
				<td class="download"></td>
			</tr>

			<!-- <tr>
			<td> counting </td>
			<td> <input type="checkbox"> </td>
			<td class="help"> count unresolved alleles as difference </td>
		</tr> -->
		</table>
	</form>

	<ul class="info"></ul>

	<table class="info"></table>

	<!-- <div id="filter-stats" class="inline-block log-list"></div> -->
	<!-- <div id="filter-state" class="stats"></div> -->

</div>




<div id="location-chart" class="chart-box"></div>







<h2>calculate distance matrices</h2>
<div id="distance">
	<ul class="info"></ul>
	<table class="info typings"></table>
	<table class="info locations"></table>
</div>

<div id="distance-chart" class="chart-box"></div>



<h2>correlation of typing and location data</h2>
<div id="correlation">
	<form class="box inline-block">
		<table>
			<tr id="td">
				<td> TD </td>
				<td class="help1"> Typing Distance </td>
				<!-- <td colspan='2'>max. Typing-Distance</td> -->
				<td> <input type="number" value="25" min="0" max="3000" size="4" /> </td>
				<td class="help"> upper limit of allowed cgmlst - distances between two typings</td>
			</tr>

			<tr id="ti">
				<td> TI </td>
				<td class="help1"> Typing Interval </td>
				<td> <input type="number" value="365" min="0" max="9999" size="4" /> </td>
				<td class="help"> time period between typings in days (use "0" for "unlimited") /TP </td>
			</tr>
			<tr>
				<td colspan="4">
					<hr />
				</td>
			</tr>
			<tr id="cl">
				<td> CL </td>
				<td class="help1"> Contact Level </td>
				<td>
					<select>
						<option>room</option>
						<option>ward</option>
						<option>clinic</option>
						<option selected="selected">any</option>
					</select>
				</td>
				<td class="help"> adminstrative level of contact-comparisons: room, ward, clinic or any of the
					aforementioned </td>
			</tr>
			<tr id="ci">
				<td> CI </td>
				<td class="help1"> Contact Interval </td>
				<td> <input type="number" value="-7" min="-100" max="100" size="4" /> </td>
				<td class="help"> lower limit of accepted time interval between contacts in days<br />negative numbers
					indicate non-overlapping time-distance, positive numbers indicate strict overlap /TI </td>
			</tr>
			<tr id="cd">
				<td> CD </td>
				<td class="help1"> Contact Depth </td>
				<td> <input type="number" value="0" min="0" max="5" size="4" /> </td>
				<td class="help"> allowed amount of intermediary contacts between two patients, "0" means direct contact
				</td>
			</tr>
		</table>
	</form>

	<ul class="info"></ul>
</div>



<div id="correlationTables" class="info"></div>



<div id="correlation-chart" class="chart-box"> </div>









<link rel="stylesheet" href="style.css">

<script type="module" src="./ui/events.js"></script>







